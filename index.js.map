{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["// Klucz API do Pixabay\nconst apiKey = '46058905-76d6ace161caaf887286baf22'; // Wprowadź swój klucz API\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadingIndicator = document.getElementById('loading-indicator');\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\n// Funkcja do czyszczenia galerii\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  currentPage = 1;\n  loadMoreBtn.style.display = 'none'; // Ukryj przycisk\n}\n\n// Funkcja do wyświetlania wskaźnika ładowania\nfunction showLoading() {\n  loadingIndicator.style.display = 'block';\n}\n\n// Funkcja do ukrywania wskaźnika ładowania\nfunction hideLoading() {\n  loadingIndicator.style.display = 'none';\n}\n\n// Funkcja do wyświetlania obrazów w galerii\nfunction displayImages(images) {\n  images.forEach(image => {\n    const galleryItem = document.createElement('li');\n    galleryItem.classList.add('gallery-item');\n\n    const imageLink = document.createElement('a');\n    imageLink.href = image.largeImageURL;\n\n    const imageElement = document.createElement('img');\n    imageElement.src = image.webformatURL;\n    imageElement.alt = image.tags;\n\n    imageLink.appendChild(imageElement);\n    galleryItem.appendChild(imageLink);\n    gallery.appendChild(galleryItem);\n  });\n\n  lightbox.refresh();\n}\n\n// Funkcja do obsługi błędów\nfunction showError(message) {\n  iziToast.error({\n    title: 'Błąd',\n    message: message,\n  });\n}\n\n// Funkcja do wyszukiwania obrazów\nasync function searchImages(query) {\n  clearGallery();\n  showLoading();\n  currentQuery = query; // Zapisz aktualne zapytanie\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: apiKey,\n        q: encodeURIComponent(query),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 40,\n      },\n    });\n\n    totalHits = response.data.totalHits; // Zapisz całkowitą liczbę wyników\n    hideLoading();\n\n    if (response.data.hits.length === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    displayImages(response.data.hits);\n    loadMoreBtn.style.display = 'block'; // Pokaż przycisk „Load more”\n\n    if (currentPage * 40 >= totalHits) {\n      loadMoreBtn.style.display = 'none'; // Ukryj przycisk, jeśli osiągnięto koniec wyników\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    hideLoading();\n    showError(\n      'Wystąpił błąd podczas pobierania obrazów. Spróbuj ponownie później.'\n    );\n  }\n}\n\n// Funkcja do ładowania kolejnej strony\nasync function loadMoreImages() {\n  currentPage += 1; // Zwiększ stronę\n  showLoading();\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: apiKey,\n        q: encodeURIComponent(currentQuery),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 40,\n      },\n    });\n\n    hideLoading();\n\n    displayImages(response.data.hits);\n\n    if (currentPage * 40 >= totalHits) {\n      loadMoreBtn.style.display = 'none'; // Ukryj przycisk, jeśli osiągnięto koniec wyników\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n    // Przewiń stronę\n    const galleryItemHeight = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryItemHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    hideLoading();\n    showError(\n      'Wystąpił błąd podczas ładowania kolejnych obrazów. Spróbuj ponownie później.'\n    );\n  }\n}\n\n// Funkcja do obsługi formularza\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (query === '') {\n    showError('Proszę wpisać hasło do wyszukania.');\n    return;\n  }\n\n  searchImages(query);\n});\n\n// Funkcja do obsługi przycisku „Load more”\nloadMoreBtn.addEventListener('click', loadMoreImages);\n"],"names":["apiKey","form","input","gallery","loadingIndicator","loadMoreBtn","lightbox","currentPage","currentQuery","totalHits","clearGallery","showLoading","hideLoading","displayImages","images","image","galleryItem","imageLink","imageElement","showError","message","searchImages","query","response","loadMoreImages","galleryItemHeight","event"],"mappings":"0uBACA,MAAMA,EAAS,qCACTC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAmB,SAAS,eAAe,mBAAmB,EAC9DC,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIC,EAAW,IAAI,eAAe,YAAY,EAC1CC,EAAc,EACdC,EAAe,GACfC,EAAY,EAGhB,SAASC,GAAe,CACtBP,EAAQ,UAAY,GACpBI,EAAc,EACdF,EAAY,MAAM,QAAU,MAC9B,CAGA,SAASM,GAAc,CACrBP,EAAiB,MAAM,QAAU,OACnC,CAGA,SAASQ,GAAc,CACrBR,EAAiB,MAAM,QAAU,MACnC,CAGA,SAASS,EAAcC,EAAQ,CAC7BA,EAAO,QAAQC,GAAS,CACtB,MAAMC,EAAc,SAAS,cAAc,IAAI,EAC/CA,EAAY,UAAU,IAAI,cAAc,EAExC,MAAMC,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,KAAOF,EAAM,cAEvB,MAAMG,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,IAAMH,EAAM,aACzBG,EAAa,IAAMH,EAAM,KAEzBE,EAAU,YAAYC,CAAY,EAClCF,EAAY,YAAYC,CAAS,EACjCd,EAAQ,YAAYa,CAAW,CACnC,CAAG,EAEDV,EAAS,QAAO,CAClB,CAGA,SAASa,EAAUC,EAAS,CAC1B,SAAS,MAAM,CACb,MAAO,OACP,QAASA,CACb,CAAG,CACH,CAGA,eAAeC,EAAaC,EAAO,CACjCZ,IACAC,IACAH,EAAec,EAEf,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKvB,EACL,EAAG,mBAAmBsB,CAAK,EAC3B,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMf,EACN,SAAU,EACX,CACP,CAAK,EAKD,GAHAE,EAAYc,EAAS,KAAK,UAC1BX,IAEIW,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCJ,EACE,0EACR,EACM,MACD,CAEDN,EAAcU,EAAS,KAAK,IAAI,EAChClB,EAAY,MAAM,QAAU,QAExBE,EAAc,IAAME,IACtBJ,EAAY,MAAM,QAAU,OAC5Bc,EAAU,4DAA4D,EAEzE,MAAe,CACdP,IACAO,EACE,qEACN,CACG,CACH,CAGA,eAAeK,GAAiB,CAC9BjB,GAAe,EACfI,IAEA,GAAI,CACF,MAAMY,EAAW,MAAM,MAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKvB,EACL,EAAG,mBAAmBQ,CAAY,EAClC,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMD,EACN,SAAU,EACX,CACP,CAAK,EAEDK,IAEAC,EAAcU,EAAS,KAAK,IAAI,EAE5BhB,EAAc,IAAME,IACtBJ,EAAY,MAAM,QAAU,OAC5Bc,EAAU,4DAA4D,GAIxE,MAAMM,EAAoB,SACvB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QAChB,CAAK,CACF,MAAe,CACdb,IACAO,EACE,8EACN,CACG,CACH,CAGAlB,EAAK,iBAAiB,SAAUyB,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMJ,EAAQpB,EAAM,MAAM,KAAI,EAE9B,GAAIoB,IAAU,GAAI,CAChBH,EAAU,oCAAoC,EAC9C,MACD,CAEDE,EAAaC,CAAK,CACpB,CAAC,EAGDjB,EAAY,iBAAiB,QAASmB,CAAc"}